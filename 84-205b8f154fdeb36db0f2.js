(window.webpackJsonp=window.webpackJsonp||[]).push([[84,93],{730:function(e,a,t){"use strict";t.r(a);t(13),t(24);var n=t(1),r=t.n(n),l=t(54),o=t(629),s=t(184),c=t(325),i=t(115),u=t.n(i),m=t(40),d=t(77),p=t(42),E=t(25),g=t(586),f=(t(594),t(9)),v=t(239),b=t(649),h=t(639),_=t(640),S=t(641),N=t(238),C=function(e){return null==e||""===e};var A=function(e){var a=e.isOpen,t=e.toggle,l=e.turnAlert,o=Object(n.useState)(""),s=o[0],i=o[1],u=Object(n.useState)(""),m=u[0],d=u[1],E=Object(n.useState)(""),g=E[0],f=E[1],v=Object(n.useState)(!1),A=v[0],I=v[1];Object(n.useEffect)((function(){C(s)||C(m)||C(g)||m!==g?I(!1):I(!0)}));var L=function(){a&&(i(""),d(""),f("")),t()};return r.a.createElement(b.a,{unmountOnClose:!0,isOpen:a,toggle:L},r.a.createElement(h.a,null,r.a.createElement(p.a,{Tag:"<>",id:"IDS_LABEL_CHANGE_PASSWORD"})),r.a.createElement(_.a,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement(p.a,{Tag:"label",className:"font-weight-bolder",id:"IDS_LABEL_CURRENT_PASSWORD"}),r.a.createElement("input",{className:"form-control",type:"password",name:"oldPass",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement(p.a,{Tag:"label",className:"font-weight-bolder",id:"IDS_LABEL_NEW_PASSWORD"}),r.a.createElement("input",{className:"form-control",type:"password",name:"oldPass",value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement(p.a,{Tag:"label",className:"font-weight-bolder",id:"IDS_LABEL_RE_NEW_PASSWORD"}),r.a.createElement("input",{className:"form-control",type:"password",name:"oldPass",value:g,onChange:function(e){return f(e.target.value)}})))),r.a.createElement(S.a,null,r.a.createElement(c.a,{type:"button",className:"m-2",color:"primary",disabled:!A,onClick:function(){A&&Object(N.b)({newPassword:m,oldPassword:s}).promise.then((function(e){e&&e.data&&e.data.code&&200===e.data.code?(l(!0,e&&e.data&&e.data.value),t()):l(!1,e&&e.data&&e.data.value)})).catch((function(e){l(!1,e.response&&e.response.data&&e.response.data.value)}))}},r.a.createElement(p.a,{Tag:"<>",id:"IDS_BTN_CHANGE_PASSWORD"})),r.a.createElement(c.a,{type:"button",className:"m-2",color:"secondary",onClick:L},r.a.createElement(p.a,{Tag:"<>",id:"IDS_CANCEL_BTN"}))))},I=t(78);var L=function(e){var a,t;function n(){for(var a,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(a=e.call.apply(e,[this].concat(n))||this).state={rawUser:{},user:{},isEdit:!1,openChangePassModal:!1},a.toggleChangePass=function(){var e=!a.state.openChangePassModal;a.setState({openChangePassModal:e})},a.toggleEdit=function(){a.setState((function(e){return{isEdit:!e.isEdit}}))},a.onChange=function(e){var t;if(e&&e.target&&e.target.name){var n=a.state.user,r=Object.assign({},n,((t={})[e.target.name]=e.target.value,t));a.setState({user:r})}},a.onCancelSave=function(){var e=a.state.rawUser;a.setState({user:e},(function(){a.toggleEdit()}))},a.onSaveUser=function(){var e=a.state.user,t=a.props,n=t.requestData,r=t.receiveData,l=t.getUser,o=e.gender,s=e.avatar,c=e.name,i=e.phoneNumber,u=e.id,m={fileid:s&&s.id||"",gender:null==o?"":o,name:c,phoneNumber:i||""};n(),Object(N.d)(u,m).promise.then((function(e){r(),e&&e.data&&200===e.data.code?(a.turnAlert(),l(!0),a.toggleEdit()):a.turnAlert(0)})).catch((function(){r(),a.turnAlert(0)}))},a.onChangePicture=function(e){var t=a.props,n=t.requestData,r=t.receiveData;if(e.target.files){var l=(e.target||e.dataTransfer).files;if(l.length){var o=a.state.user,s=new window.FormData;s.append("file",l[0],l[0].filename||"img.jpg"),n(),Object(v.b)(s).promise.then((function(e){if(e.data&&e.data.value&&e.data.value){var t=e.data.value,n=Object.assign({},o,{avatar:t});a.setState({user:n}),r()}else r()})).catch((function(){r()}))}}},a.genListGender=u()((function(e){var t=a.props.intl;return e.map((function(e){return{title:t.formatMessage({id:e.title}),value:e.value}}))})),a.turnAlert=function(e,t){void 0===e&&(e=!0);var n=a.props.toggleAlert;n(e?{color:f.b.SUCCESS,text:"IDS_ALERT_UPDATE_SUCCESS",message:t}:{color:f.b.DANGER,text:"IDS_ALERT_UPDATE_FAIL",message:t})},a}return t=e,(a=n).prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t,n.getDerivedStateFromProps=function(e,a){return e.user!==a.rawUser?{rawUser:e.user,user:e.user}:null},n.prototype.render=function(){var e=this.state,a=e.user,t=e.isEdit,n=e.openChangePassModal;return r.a.createElement(o.a,{className:"user-wrapper pt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4 text-center"},r.a.createElement("img",{src:a.avatar&&a.avatar.url||"/images/avatar.png",className:"img-thumbnail avatar-thumbnail",alt:"avatar"}),t&&r.a.createElement("div",{className:"upload-avatar border p-1"},r.a.createElement(s.a,{onChange:this.onChangePicture,className:"input-upload",type:"file",accept:"image/*",name:"file"}),r.a.createElement("div",{className:"avtar-upload-icon"},r.a.createElement(m.n,{size:"1.5em"})))),r.a.createElement("div",{className:"col-12 offset-0 col-md-7 offset-md-1 col-lg-8 offset-lg-0"},r.a.createElement("div",{className:"row"},r.a.createElement(I.a,{classWrapper:"col-lg-6",id:"username",name:"username",label:"IDS_LABEL_USERNAME",value:a.username,mode:f.k.VIEW,type:"text",classLabel:"col-12",classInputContainer:"col-12",isReadOnly:!0}),r.a.createElement(I.a,{classWrapper:"col-lg-6",id:"email",label:"IDS_LABEL_EMAIL",value:a.email,name:"email",mode:f.k.VIEW,type:"text",classLabel:"col-12",classInputContainer:"col-12",isReadOnly:!0}),r.a.createElement(I.a,{classWrapper:"col-lg-6",id:"name",label:"IDS_LABEL_NAME",value:a.name,name:"name",mode:t?f.k.EDIT:f.k.VIEW,onChange:this.onChange,type:"text",classLabel:"col-12",classInputContainer:"col-12"}),r.a.createElement(I.a,{classWrapper:"col-lg-6",id:"phoneNumber",label:"IDS_LABEL_PHONE",value:a.phoneNumber,name:"phoneNumber",mode:t?f.k.EDIT:f.k.VIEW,onChange:this.onChange,type:"text",classLabel:"col-12",classInputContainer:"col-12"}),r.a.createElement(I.a,{classWrapper:t?"col-lg-12":"col-lg-6",id:"gender",label:"IDS_LABEL_GENDER",value:a.gender,name:"gender",mode:t?f.k.EDIT:f.k.VIEW,onChange:this.onChange,list:this.genListGender(f.j),type:"radio-group",classLabel:"col-12",classInputContainer:"col-12"})),t?r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(c.a,{type:"button",className:"m-2",color:"success",onClick:this.onSaveUser},r.a.createElement(p.a,{Tag:"<>",id:"IDS_SAVE_BTN"})),r.a.createElement(c.a,{type:"button",className:"m-2",color:"secondary",onClick:this.onCancelSave},r.a.createElement(p.a,{Tag:"<>",id:"IDS_CANCEL_BTN"}))):r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement(c.a,{type:"button",className:"m-2",color:"primary",onClick:this.toggleEdit},r.a.createElement(p.a,{Tag:"<>",id:"IDS_EDIT_BTN"})),r.a.createElement(c.a,{type:"button",className:"m-2",color:"secondary",onClick:this.toggleChangePass},r.a.createElement(p.a,{Tag:"<>",id:"IDS_BTN_CHANGE_PASSWORD"}))))),r.a.createElement(A,{turnAlert:this.turnAlert,isOpen:n,toggle:this.toggleChangePass}))},n}(r.a.PureComponent);a.default=Object(l.b)((function(e){return{user:e.user.info}}),(function(e){return{requestData:function(){return e(Object(E.b)())},receiveData:function(){return e(Object(E.a)())},toggleAlert:function(a){return e(Object(E.c)(a))},getUser:function(a){return e(Object(g.a)(a))}}}))(Object(d.injectIntl)(L))},839:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(54),o=t(966),s=t(962),c=t(967),i=t(968),u=t(969),m=t(42),d=t(730),p=t(585),E=t(23),g=(t(625),t(9));var f=[{title:"IDS_LABEL_SUB_PROFILE_USER",id:"profile",component:d.default,to:E.a.PROFILE_USER},{title:"IDS_LABEL_SUB_PROFILE_RESTAURANT",id:"restaurant",component:p.default,to:E.a.PROFILE_RESTAURANT}],v=function(e){var a,t;function n(){for(var a,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(a=e.call.apply(e,[this].concat(n))||this).state={activeTab:f[0].id},a.toogleTab=function(e){return function(){a.setState({activeTab:e})}},a.getTypeUser=function(e){void 0===e&&(e=[]);var a=e.filter((function(e){return e.id===g.n})),t=e.filter((function(e){return e.id===g.l})),n=e.filter((function(e){return e.id===g.m}));return n.length?n[0].id:t.length?t[0].id:a.length?a[0].id:void 0},a.getListTab=function(){var e=a.props.user;return e&&e.roles&&e.roles.length&&a.getTypeUser(e&&e.roles)===g.l?[f[0]]:f},a}return t=e,(a=n).prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t,n.prototype.render=function(){var e=this,a=this.state.activeTab,t=this.props.role===g.m,n=this.getListTab();return r.a.createElement("div",{className:"page-wrapper profile-wrapper container-fluid"},!t&&r.a.createElement("div",{className:"d-sm-flex align-items-center header-wrapper"},r.a.createElement(m.a,{id:"IDS_LABEL_PROFILE",Tag:"h3",className:"mb-0 text-dark"})),r.a.createElement("div",{className:"profile-body-wrapper"},!!t&&r.a.createElement(o.a,null,r.a.createElement(d.default,null)),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{tabs:!0},n.map((function(t){return r.a.createElement(c.a,{key:t.id,className:"w-50"},r.a.createElement(i.a,{className:"c-pointer "+(a===t.id?"active":""),onClick:e.toogleTab(t.id)},r.a.createElement(m.a,{Tag:"<>",id:t.title})))}))),r.a.createElement(u.a,{activeTab:a,className:"p-3"},n.map((function(e){return r.a.createElement(o.a,{tabId:e.id,key:e.id},r.a.createElement(e.component,null))}))))))},n}(r.a.PureComponent);v.defaultProps={role:g.n},a.default=Object(l.b)((function(e){return{restaurantId:e.restaurant.restaurantId,user:e.user.info}}),void 0)(v)}}]);