(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{846:function(e,t,a){"use strict";a.r(t);a(83),a(13),a(82);var n=a(1),r=a.n(n),l=a(77),o=a(54),i=a(91),c=a(325),s=a(185),d=a.n(s),u=a(40),p=a(42),m=a(575),g=a(9),E=a(244),f=a(573),h=a(589),b=a(67),M=a(210),S=function(e){return e.material.listMaterialId||[]},O=function(e){return e.material.listObjectMaterial||{}},D=function(e){return e.material&&e.material.modalDelete&&!Object(b.l)(e.material.modalDelete.id)?e.material.modalDelete.id:null},v=function(e){return e.material&&e.material.modalEdit&&e.material.modalEdit&&e.material.modalEdit.id?e.material.modalEdit.id:null},C=(a(24),a(649)),y=a(639),_=a(640),N=a(641);var I=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={},t.toggleModalDelete=function(){(0,t.props.toggleModalDelete)(null)},t.handleDeleteMaterial=function(){var e=t.props,a=e.materialInfo,n=e.deleteMaterial,r=a.rowIndex;n(a.id),Object(b.l)(a.id)||t.props.closeModalDelete(r)},t}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.render=function(){var e=this.props.materialInfo;return r.a.createElement(C.a,{isOpen:!Object(b.l)(e&&e.id),size:"sm",centered:!0,toggle:this.toggleModalDelete},r.a.createElement(y.a,null,r.a.createElement(p.a,{id:"IDS_CONFIRM_DELETE"})),r.a.createElement(_.a,null,r.a.createElement(p.a,{id:"IDS_MENU_RESOURCES"}),":Â ",e&&e.name),r.a.createElement(N.a,null,r.a.createElement(c.a,{className:"btn-danger",onClick:this.handleDeleteMaterial},r.a.createElement(p.a,{Tag:"<>",id:"IDS_CONFIRM_OK"})),r.a.createElement(c.a,{onClick:this.toggleModalDelete},r.a.createElement(p.a,{Tag:"<>",id:"IDS_CONFIRM_NO"}))))},n}(r.a.PureComponent);I.defaultProps={closeModalDelete:function(){}};var j=Object(o.b)((function(){var e=Object(h.a)([D,O],(function(e,t){return t[e]}));return function(t){return{materialInfo:e(t)}}}),(function(e){return{toggleModalDelete:function(t,a){return e(Object(E.e)(t,a))},deleteMaterial:function(t){return e(Object(E.a)(t))}}}))(I),w=a(629),L=a(635),x=a(78);var k=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={data:null},t.initState=function(e){t.setState({data:e})},t.onChange=function(e){var a;if(e&&e.target&&e.target.name){var n=e.target&&e.target.value||"",r=t.state.data,l=Object.assign({},r,((a={})[e.target.name]=n,a));t.setState({data:l})}},t.onCloseModal=function(){t.setState({data:null},(function(){t.props.closeModal()}))},t.onSave=function(){console.log("onSave",t.state.data),t.props.saveMaterial(t.state.data),t.onCloseModal()},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var l=n.prototype;return l.componentDidMount=function(){this.initState(this.props.editMaterial)},l.componentDidUpdate=function(e){this.props.mode===e.mode&&this.props.editMaterial===e.editMaterial||this.initState(this.props.editMaterial)},l.render=function(){var e=this.props.mode,t=this.state.data,a=!Object(b.l)(t)&&!Object(b.l)(t.id);return r.a.createElement(C.a,{unmountOnClose:!0,centered:!0,className:"dish-modal-wrapper modal-lg modal-xl",isOpen:a,toggle:this.onCloseModal},r.a.createElement(y.a,{tag:"h4",toggle:this.onCloseModal},r.a.createElement(p.a,{id:"IDS_LABEL_STAFF_TIMEKEEPING"})),r.a.createElement(_.a,null,t&&r.a.createElement(w.a,null,r.a.createElement(L.a,{form:!0,className:"d-flex justify-content-between"},e===g.k.EDIT&&r.a.createElement(x.a,{label:"IDS_DISH_LABEL_ID",id:"materialId",value:t.id,isReadOnly:!0,mode:e,classWrapper:e===g.k.NEW?"d-none":"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),r.a.createElement(x.a,{label:"IDS_LABEL_RESOURCES_NAME",id:"name",value:t.name||"",name:"name",mode:e,onChange:this.onChange,required:!0,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),r.a.createElement(x.a,{id:"quantity",label:"IDS_DISH_LABEL_QUANTITY",value:t.quantity||0,onChange:this.onChange,name:"quantity",type:"number",mode:e,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0})))),r.a.createElement(N.a,null,r.a.createElement(N.a,null,r.a.createElement(c.a,{color:"primary",onClick:this.onSave},r.a.createElement(p.a,{Tag:"<>",id:"IDS_SAVE_BTN"})),r.a.createElement(c.a,{color:"secondary",onClick:this.onCloseModal},r.a.createElement(p.a,{Tag:"<>",id:"IDS_CANCEL_BTN"})))))},n}(r.a.PureComponent);k.defaultProps={closeModal:function(){}};var T=Object(o.b)((function(e){return{editMaterial:Object(h.a)([v,O],(function(e,t){return e===M.a.id?M.a:t[e]}))(e),mode:e.material.modalEdit&&e.material.modalEdit.mode?e.material.modalEdit.mode:g.k.NONE}}),(function(e){return{toggleModalMaterial:function(t,a){return e(Object(E.f)(t,a))},toggleModalDelete:function(t){return e(Object(E.e)(t))},saveMaterial:function(t){return e(Object(E.c)(t))}}}))(k);var A=function(e){var t,a;function n(t){var a;return(a=e.call(this,t)||this).getNewUrl=function(e){var t=d.a.stringify(e);return""===t?a.props.path:a.props.path+"?"+t},a.isEditOrNew=function(e){var t=d.a.parse(e);t&&!Object(b.l)(t.id)?t.id===M.a.id?a.props.toggleModalMaterial(t.id,g.k.NEW):a.props.toggleModalMaterial(t.id,g.k.EDIT):a.props.toggleModalMaterial(null,g.k.NONE)},a.getListMaterial=function(){var e=a.props,t=e.pageSize,n=e.pageIndex,r=e.orderBy,l={pageSize:t,sortBy:e.sortBy,orderBy:r,pageNum:n};a.props.getListMaterial(!0,l)},a.generateColumns=function(){var e=a.props.intl.formatMessage;return[{dataField:"id",text:"ID",sort:!0,headerStyle:{width:"80px",textAlign:"center"},style:{padding:"0.75em 0.5em"}},{dataField:"name",text:e({id:"IDS_LABEL_RESOURCES_NAME"}),sort:!0},{dataField:"quantity",text:e({id:"IDS_DISH_LABEL_QUANTITY"}),sort:!0,headerStyle:{width:"120px"},formatter:function(e){return Object(b.o)(Number(e))}},{dataField:"tool",text:e({id:"IDS_DISH_LABEL_TOOLS"}),formatter:a.generateColumnsTools,headerStyle:{width:"125px"},style:{textAlign:"center"}}]},a.generateColumnsTools=function(e,t,n){return r.a.createElement("div",{className:"tool"},r.a.createElement("button",{type:"button",className:"btn btn-primary my-2 mx-2 rounded btn-sm btn-md",onClick:a.handleClickEdit(t,n)},r.a.createElement(u.p,null)),r.a.createElement("button",{type:"button",className:"btn btn-danger my-2 mx-2 rounded btn-sm btn-md",onClick:a.handleClickDelete(t,n)},r.a.createElement(u.x,null)))},a.handleClickEdit=function(e){return function(t){t&&(t.preventDefault(),t.stopPropagation());var n=a.getNewUrl({id:e.id});Object(i.navigate)(n)}},a.handleClickNew=function(){var e=a.getNewUrl({id:M.a.id});Object(i.navigate)(e)},a.handleClickDelete=function(e,t){return function(n){n&&(n.preventDefault(),n.stopPropagation()),a.props.toggleModalDelete(Object.assign({},e,{rowIndex:t}))}},a.closeModalDelete=function(e){var t=a.props,n=t.pageSize,r=t.onPageChange,l=t.pageIndex;e===n-1&&l>1?r(n-1):setTimeout((function(){a.getListMaterial()}),500)},a.closeModalEdit=function(){setTimeout((function(){Object(i.navigate)(a.getNewUrl()),a.props.getNewDataFirstPage()}),500)},a.state={},a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var l=n.prototype;return l.componentDidMount=function(){this.getListMaterial(),this.isEditOrNew(this.props.location.search)},l.componentDidUpdate=function(e){this.props.location.search!==e.location.search&&this.isEditOrNew(this.props.location.search)},l.render=function(){var e=this.props,t=e.pageSize,a=e.onSort,n=e.onPageChange,l=e.onSizePerPageChange,o=e.totalSize,i=e.listMaterial;return r.a.createElement("div",{className:"page-wrapper resources-wrapper container-fluid"},r.a.createElement("div",{className:"d-sm-flex align-items-center header-wrapper"},r.a.createElement(p.a,{id:"IDS_MENU_RESOURCES",Tag:"h3",className:"mb-0 text-dark"})),r.a.createElement("div",{className:"resources-body-wrapper"},r.a.createElement("div",{className:"toolbar-resources-wrapper d-flex justify-content-end"},r.a.createElement(c.a,{className:"btn btn-success rounded m-2",color:"primary",type:"button",onClick:this.handleClickNew},r.a.createElement(u.q,null))),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement(f.a,{totalSize:o,keyField:"id",data:i,columns:this.generateColumns(),onPageChange:n,onSizePerPageChange:l,pageSize:t,onSort:a})),r.a.createElement(j,{closeModalDelete:this.closeModalDelete}),r.a.createElement(T,{closeModal:this.closeModalEdit})))},n}(n.PureComponent),P={pageSize:g.h,pageIndex:1,orderBy:"desc",sortBy:"id",functionGetData:"getListMaterial"};t.default=Object(o.b)((function(){var e=Object(h.a)([S,O],(function(e,t){return e.map((function(e){return t[e]}))}));return function(t,a,n){return console.log(a,n),{listMaterial:e(t),totalSize:t.material.totalSize}}}),(function(e){return{getListMaterial:function(t,a){return e(Object(E.b)(t,a))},toggleModalDelete:function(t){return e(Object(E.e)(t))},toggleModalMaterial:function(t,a){return e(Object(E.f)(t,a))}}}))(Object(l.injectIntl)(Object(m.a)(A,P)))}}]);