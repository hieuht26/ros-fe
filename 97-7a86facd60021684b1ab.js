(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{842:function(e,t,a){"use strict";a.r(t);a(61),a(114),a(28),a(11),a(53),a(32),a(18),a(83),a(82);var n=a(1),o=a.n(n),r=a(54),l=a(91),c=a(40),i=a(185),s=a.n(i),u=a(77),d=a(42),p=(a(13),a(12)),m=a(67),f=a(9),g=a(238),E=a(25),D=a(588);var b=function(e){return{type:p.h.UPDATE_EMPLOYEE,payload:{staffInfo:e}}},h=function(e){return{type:p.h.UPDATE_MODE_MODAL_INFO,payload:{mode:e}}},_=function(e,t,a){return{type:p.h.TOGGLE_MODAL_INFO,payload:{isOpen:e,userId:t,mode:a}}},O=function(e,t,a){return{type:p.h.TOGGLE_MODAL_WAGE,payload:{isOpen:e,userId:t,mode:a}}},I=function(e,t){return{type:p.h.TOGGLE_MODAL_DELETE,payload:{isOpen:e,userId:t}}},S=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t={}),function(a,n){(n().staff.listIdStaff.length<1||e)&&(a(Object(E.b)()),Object(g.f)(t).promise.then((function(e){if(a(Object(E.a)()),e&&e.data&&""+e.data.code=="200"){var o=e.data.value,r=o.totalPages,l=o.list,c=n().staff.listObjectStaff,i=[],s={};l.forEach((function(e){i.push(e.id),s[e.id]=e})),a((d=i,m=Object.assign({},c,{},s),{type:p.h.UPDATE_LIST_STAFF,payload:{listIdStaff:d,listObjectStaff:m}})),a((u=r*(t.pageSize||1),{type:p.h.UPDATE_TOTAL_SIZE,payload:{totalSize:u}}))}var u,d,m})).catch((function(){a(Object(E.a)())})))}},y=function(e,t){return void 0===e&&(e=!1),function(a,n){if(t){var o=n().staff.listObjectStaff,r={};!e&&o[t]?(r=o[t],a(b(r))):(a(Object(E.b)()),Object(g.e)(t).promise.then((function(e){console.log(e),a(Object(E.a)()),e&&e.data&&""+e.data.code=="200"&&a(b(e.data.value||{}))})).catch((function(){a(Object(E.a)())})))}}},T=function(e,t){return function(a){a(Object(E.b)()),Object(D.a)(e).promise.then((function(e){a(Object(E.a)()),e&&e.data&&""+e.data.code=="200"&&(a(Object(E.c)({color:f.b.SUCCESS,text:"IDS_ALERT_UPDATE_SUCCESS"})),a({type:p.h.ADD_WAGE_TO_SV}),t&&"function"==typeof t&&t())})).catch((function(){a(Object(E.a)()),a(Object(E.c)({color:f.b.DANGER,text:"IDS_ALERT_UPDATE_FAIL"}))}))}},C=function(e,t){return function(a){a(Object(E.b)()),Object(D.e)(e).promise.then((function(e){a(Object(E.a)()),e&&e.data&&""+e.data.code=="200"&&(a(Object(E.c)({color:f.b.SUCCESS,text:"IDS_ALERT_UPDATE_SUCCESS"})),a({type:p.h.UPDATE_WAGE_TO_SV}),t&&"function"==typeof t&&t())})).catch((function(){a(Object(E.a)()),a(Object(E.c)({color:f.b.DANGER,text:"IDS_ALERT_UPDATE_FAIL"}))}))}},A=function(e){return function(t){t(Object(E.b)()),Object(D.c)(e).promise.then((function(e){if(e&&e.data&&""+e.data.code=="200"){var a={};e.data.value.list.forEach((function(e){a[e.userId]=e})),t(function(e){return{type:p.h.UPDATE_LIST_WAGE,payload:{listObjectWage:e}}}(a))}t(Object(E.a)())})).catch((function(){t(Object(E.a)())}))}},L=function(e){return function(t){t(Object(E.b)()),Object(D.d)(e).promise.then((function(a){var n,o;t(Object(E.a)()),a&&a.data&&""+a.data.code=="200"&&t((n=a.data.value,o=e.userId,{type:p.h.UPDATE_LIST_WAGE_BY_DATE,payload:{listWage:n,userId:o}}))})).catch((function(){t(Object(E.a)())}))}},j=a(575),v=a(573),W=a(589),N=function(e){return e.staff.listIdStaff||[]},M=function(e){return e.staff.listObjectStaff||{}},F=function(e){return e.staff.listObjectWage||{}},k=function(e){return e.staff.listWageByDate||[]},B=function(e){return e.staff.modalInfo.userId||null},w=function(e){return e.staff.modalWage.userId||null},P=function(e){return e.staff.toolbar.fromDate||(new Date).getTime()},x=function(e){return e.staff.toolbar.toDate||(new Date).getTime()},U=function(e){return e.staff.modalWage.userId},R=a(147),H=a(173),K=a(478),G=a(475),V=a(479),Y=a(629),q=a(630),z=a(965),J=a(631),Z=a(325),Q=a(237),X=a(102);var $=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={fromDate:Object(R.default)(new Date,f.d),toDate:Object(R.default)(new Date,f.d),isEnableTimeKeeping:!1},t.toggleTimeKeeping=function(){var e=t.state.isEnableTimeKeeping,a=t.props.toggleTimeKeeping;t.setState({isEnableTimeKeeping:!e},(function(){a(!e)}))},t.onChangeFromDate=function(e){t.setState({fromDate:Object(R.default)(e,f.d)})},t.onChangeToDate=function(e){t.setState({toDate:Object(R.default)(e,f.d)})},t.onClickSearch=function(e){if(e){e.preventDefault(),e.stopPropagation();var a=t.state,n=a.fromDate,o=a.toDate;(0,t.props.onClickSearch)({fromDate:n,toDate:o})}},t.onClickToday=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(new Date,f.d),toDate:Object(R.default)(new Date,f.d)},(function(){t.onClickSearch(e)})))},t.onClickThisWeek=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(Object(H.default)(new Date),f.d),toDate:Object(R.default)(Object(K.default)(new Date),f.d)},(function(){t.onClickSearch(e)})))},t.onClickThisMonth=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(Object(G.default)(new Date),f.d),toDate:Object(R.default)(Object(V.default)(new Date),f.d)},(function(){t.onClickSearch(e)})))},t.onClickAdd=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.props.addEmployee())},t}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.render=function(){var e=this.props.intl,t=this.state,a=t.fromDate,n=t.toDate,r=t.isEnableTimeKeeping;return o.a.createElement(Y.a,{className:"toolbar-wrapper d-flex align-items-center justify-content-end",method:"post",onSubmit:this.onSubmit},o.a.createElement(q.a,{className:"toggle-time-keeping mr-2 flex-grow-1"},o.a.createElement(z.a,{bsSize:"lg",type:"switch",id:"toogle-time-keeping",name:"toogleTimeKeeping",checked:r,onChange:this.toggleTimeKeeping,label:e.formatMessage({id:"IDS_MENU_TIMEKEEPING"})})),r&&o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{className:"ml-2 mr-2 d-flex align-items-center"},o.a.createElement(J.a,{className:"mb-0 mr-2"},o.a.createElement(d.a,{Tag:"<>",id:"IDS_LABLE_FROM"})),o.a.createElement(Q.a,{mode:f.k.EDIT,date:new Date(a),onChange:this.onChangeFromDate})),o.a.createElement(q.a,{className:"ml-2 mr-2 d-flex align-items-center"},o.a.createElement(J.a,{className:"mb-0 mr-2"},o.a.createElement(d.a,{Tag:"<>",id:"IDS_LABEL_TO"})),o.a.createElement(Q.a,{mode:f.k.EDIT,date:new Date(n),onChange:this.onChangeToDate})),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickToday},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_TODAY"}))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickThisWeek},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_WEEK"}))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickThisMonth},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_THIS_MONTH"}))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickSearch},o.a.createElement(c.s,null)))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{className:"btn btn-success rounded",color:"primary",type:"button",onClick:this.onClickAdd},o.a.createElement(c.q,null))))},n}(o.a.PureComponent);$.defaultProps={addEmployee:function(){}};var ee=Object(r.b)((function(e){return{isEnableTimeKeeping:e.staff.toolbar.enableTimeKeeping,fromDate:e.staff.toolbar.fromDate,toDate:e.staff.toolbar.toDate}}),(function(e){return{toggleTimeKeeping:function(t){return e((a=t,{type:p.h.TOGGLE_TIME_KEEPING_FILTER,payload:{isEnable:a}}));var a},onClickSearch:function(t){return e(function(e){return function(t){t({type:p.h.ON_CLICK_SEARCH,payload:{data:e}}),t(A(e))}}(t))},toggleModalInfo:function(t,a,n){return e(_(t,a,n))}}}))(Object(u.injectIntl)($)),te={MODAL_TYPE:"t",ID:"id",FROM:"from",TO:"to"},ae={INFO:1,TIME_KEEPING:2},ne={id:"new_"+(new Date).getTime(),birthday:"",email:"",gender:0,hourWage:"",idCardDated:"",idCardPlace:"",identifyCardNo:"",name:"",note:"",passportDated:"",passportNo:"",passportPlace:"",password:"",phoneNumber:""},oe=((new Date).getTime(),Object(m.i)((new Date).getTime(),f.d),{hourWage:0,normalHours:0,otHours:0,totalWage:0}),re=(a(627),a(24),a(649)),le=a(639),ce=a(640),ie=a(635),se=a(641),ue=a(78);var de=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={employeeInfo:ne},t.initEmployeeInfo=function(e,a){e.isOpen&&e.mode===f.k.VIEW?a?t.setState({employeeInfo:a}):t.props.getEmployee(!0,e.userId):e.isOpen&&e.mode===f.k.NEW&&t.setState({employeeInfo:ne})},t.genListGender=function(e){var a=t.props.intl;return e.map((function(e){return{title:a.formatMessage({id:e.title}),value:e.value}}))},t.generateBtn=function(e){return e!==f.k.VIEW?o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{color:"primary",onClick:t.onSaveEmployee},o.a.createElement(d.a,{Tag:"<>",id:"IDS_SAVE_BTN"})),o.a.createElement(Z.a,{color:"secondary",onClick:t.onClickCancelEdit},o.a.createElement(d.a,{Tag:"<>",id:"IDS_CANCEL_BTN"}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{color:"info",onClick:t.onClickEdit},o.a.createElement(d.a,{Tag:"<>",id:"IDS_EDIT_BTN"})),o.a.createElement(Z.a,{color:"danger",onClick:t.onClickDelete},o.a.createElement(d.a,{Tag:"<>",id:"IDS_DELETE_BTN"})),o.a.createElement(Z.a,{color:"secondary",onClick:t.onCloseModal},o.a.createElement(d.a,{Tag:"<>",id:"IDS_CANCEL_BTN"})))},t.onSaveEmployee=function(){var e=t.state.employeeInfo,a=Object.assign({},e,{birthday:Object(R.default)(new Date(e.birthday),f.d)});t.props.modalInfo.mode===f.k.NEW?(delete a.id,t.props.addEmployeeToSV(a,(function(){t.onCloseModal(!0)}))):t.props.updateEmployeeToSV(a)},t.onCloseModal=function(e){void 0===e&&(e=!1),t.setState({employeeInfo:null}),t.props.closeModalInfo(e)},t.onChange=function(e){var a;if(e&&e.target&&e.target.name){var n=e.target&&e.target.value||"",o=t.state.employeeInfo,r=Object.assign({},o,((a={})[e.target.name]=n,a));t.setState({employeeInfo:r})}},t.onChangeDate=function(e){t.onChange({target:{name:"birthday",value:Object(R.default)(e,f.d)}})},t.onClickEdit=function(){t.props.updateModeModalInfo(f.k.EDIT)},t.onClickCancelEdit=function(){var e=t.props,a=e.userInfo,n=e.modalInfo;n.isOpen&&n.mode===f.k.NEW?t.onCloseModal():(t.setState({employeeInfo:a}),t.props.updateModeModalInfo(f.k.VIEW))},t.onClickDelete=function(){var e=t.props.userInfo;t.props.toggleModalDeleteProps(!0,e.id)},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidMount=function(){this.initEmployeeInfo(this.props.modalInfo,this.props.userInfo)},r.componentDidUpdate=function(e){this.props.modalInfo.isOpen===e.modalInfo.isOpen&&this.props.userInfo===e.userInfo||this.initEmployeeInfo(this.props.modalInfo,this.props.userInfo)},r.render=function(){var e=this.props.modalInfo,t=this.state.employeeInfo,a=e.isOpen,n=e.mode;return o.a.createElement(re.a,{unmountOnClose:!0,centered:!0,className:"dish-modal-wrapper modal-lg modal-xl",isOpen:a,toggle:this.onCloseModal},o.a.createElement(le.a,{tag:"h4",toggle:this.onCloseModal},o.a.createElement(d.a,{id:"IDS_LABEL_STAFF_INFO"}),o.a.createElement("span",{className:"staff-name ml-2"},n!==f.k.NEW&&t&&(t.name||t.id)||"")),o.a.createElement(ce.a,null,t&&o.a.createElement(Y.a,null,o.a.createElement(ie.a,{form:!0,className:"d-flex justify-content-between"},o.a.createElement(ue.a,{label:"IDS_DISH_LABEL_ID",id:"userId",value:t.id,isReadOnly:!0,mode:n,classWrapper:n===f.k.NEW?"d-none":"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_STAFF_NAME",id:"name",value:t.name||"",name:"name",mode:n,onChange:this.onChange,required:!0,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{id:"gender",label:"IDS_LABEL_GENDER",value:t.gender,name:"gender",mode:n,onChange:this.onChange,list:this.genListGender(f.j),type:"radio-group",classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{id:"birthday",label:"IDS_LABEL_STAFF_BIRTHDAY",value:t.birthday?new Date(t.birthday):void 0,name:"birthday",onChange:this.onChangeDate,mode:n,type:"datepicker",classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}),o.a.createElement(ue.a,{label:"IDS_LABEL_EMAIL",id:"email",value:t.email||"",name:"email",mode:n,onChange:this.onChange,required:!0,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_STAFF_CMND",id:"identifyCardNo",value:t.identifyCardNo||"",name:"identifyCardNo",mode:n,onChange:this.onChange,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_STAFF_PASSPORT",id:"passportNo",value:t.passportNo||"",name:"passportNo",mode:n,onChange:this.onChange,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_PHONE",id:"phoneNumber",value:t.phoneNumber||"",name:"phoneNumber",mode:n,onChange:this.onChange,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_ORDER_INFO_ORDER_NOTE",id:"note",value:t.note||"",name:"note",mode:n,onChange:this.onChange,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{id:"hourWage",label:"IDS_LABEL_STAFF_WAGE_HOURY",value:t.hourWage,name:"hourWage",type:"number",mode:n,onChange:this.onChange,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0})))),o.a.createElement(se.a,null,this.generateBtn(n)))},n}(o.a.PureComponent);de.defaultProps={closeModalInfo:function(){}};var pe=Object(r.b)((function(e){return{userInfo:Object(W.a)([B,M],(function(e,t){return Object(m.l)(e)?null:t[e]}))(e),modalInfo:e.staff.modalInfo}}),(function(e){return{toggleModalInfo:function(t,a,n){return e(_(t,a,n))},updateModeModalInfo:function(t){return e(h(t))},toggleModalDeleteProps:function(t,a){return e(I(t,a))},getEmployee:function(t,a){return e(y(t,a))},addEmployeeToSV:function(t,a){return e(function(e,t){return function(a){a(Object(E.b)()),Object(g.a)(Object(m.p)(e)).promise.then((function(e){a(Object(E.a)()),a({type:p.h.ADD_EMPLOYEE_TO_SV}),e&&e.data&&""+e.data.code=="200"&&a(Object(E.c)({color:f.b.SUCCESS,text:"IDS_ALERT_UPDATE_SUCCESS"})),t&&"function"==typeof t&&t()})).catch((function(){a(Object(E.a)()),a(Object(E.c)({color:f.b.DANGER,text:"IDS_ALERT_UPDATE_FAIL"}))}))}}(t,a))},updateEmployeeToSV:function(t,a){return e(function(e,t){return function(a){a(Object(E.b)()),Object(g.h)(Object(m.p)(e)).promise.then((function(n){a(Object(E.a)()),a({type:p.h.UPDATE_EMPLOYEE_TO_SV}),t&&"function"==typeof t&&t(),a(y(!0,e.id)),a(h(f.k.VIEW)),n&&n.data&&""+n.data.code=="200"&&a(Object(E.c)({color:f.b.SUCCESS,text:"IDS_ALERT_UPDATE_SUCCESS"}))})).catch((function(){a(Object(E.a)()),a(Object(E.c)({color:f.b.DANGER,text:"IDS_ALERT_UPDATE_FAIL"}))}))}}(t,a))}}}))(Object(u.injectIntl)(de));var me=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={},t.toggleModalDelete=function(){var e=t.props,a=e.isOpenModalDelete;(0,e.toggleModalDeleteProps)(!a,null)},t.handleDeleteEmployee=function(){var e=t.props,a=e.deleteUserId,n=e.deleteEmployee,o=e.isOpenModalInfo;n(a),o&&t.props.closeModalInfo(!0)},t}return a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.prototype.render=function(){var e=this.props.isOpenModalDelete;return o.a.createElement(re.a,{isOpen:e,size:"sm",centered:!0,toggle:this.toggleModalDelete},o.a.createElement(le.a,null,o.a.createElement(d.a,{id:"IDS_CONFIRM_DELETE"})),o.a.createElement(se.a,null,o.a.createElement(Z.a,{className:"btn-danger",onClick:this.handleDeleteEmployee},o.a.createElement(d.a,{Tag:"<>",id:"IDS_CONFIRM_OK"})),o.a.createElement(Z.a,{onClick:this.toggleModalDelete},o.a.createElement(d.a,{Tag:"<>",id:"IDS_CONFIRM_NO"}))))},n}(o.a.PureComponent);me.defaultProps={closeModalInfo:function(){}};var fe=Object(r.b)((function(e){return{isOpenModalDelete:e.staff.modalDelete.isOpen,deleteUserId:e.staff.modalDelete.userId,isOpenModalInfo:e.staff.modalInfo.isOpen}}),(function(e){return{toggleModalDeleteProps:function(t,a){return e(I(t,a))},deleteEmployee:function(t){return e(function(e){return function(t){t(Object(E.b)()),Object(g.c)(e).promise.then((function(){t(Object(E.a)()),t({type:p.h.DELETE_EMPLOYEE,payload:{userId:e}}),t(I(!1,null))})).catch((function(){t(Object(E.a)())}))}}(t))}}}))(me),ge=a(648),Ee=a(111);var De=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={listWageDate:[]},t.initListWageDate=function(e,a,n){for(var o=[],r=new Date(a),l=new Date(n),c=t.props.hourWage,i=function(t){var a=e.filter((function(e){return 0===Object(ge.a)(Object(Ee.default)(new Date(e.date)),Object(Ee.default)(t))}));a.length>0?o.push(a[0]):o.push(Object.assign({},oe,{id:"new_"+t.getTime(),date:Object(m.i)(t.getTime(),f.d),hourWage:c}))},s=r;s<=l;s.setDate(s.getDate()+1))i(s);t.setState({listWageDate:o})},t.generateColumnsTools=function(e,a,n){var r=t.props.intl.formatMessage;return o.a.createElement("div",{className:"tool"},n>0&&o.a.createElement("button",{type:"button",className:"btn btn-primary my-2 mx-2 rounded btn-sm btn-md",onClick:t.onClickCopy(a,n)},r({id:"IDS_LABEL_STAFF_TIME_KEEPING_COPY"})),o.a.createElement("button",{type:"button",className:"btn btn-info my-2 mx-2 rounded btn-sm btn-md",onClick:t.onClickEdit(a,n)},r({id:"IDS_EDIT_BTN"})))},t.generateColumns=function(){var e=t.props.intl.formatMessage;return[{dataField:"date",text:e({id:"IDS_LABEL_UNIT_DAY"}),sort:!1,formatter:function(e){return e?Object(m.i)(new Date(e)):""}},{dataField:"normalHours",text:e({id:"IDS_LABEL_STAFF_NORMAL_HOURS"}),sort:!1,formatter:function(e){return Object(m.o)(Number(e))}},{dataField:"otHours",text:e({id:"IDS_LABEL_STAFF_OT_HOURS"}),sort:!1,formatter:function(e){return Object(m.o)(Number(e))}},{dataField:"hourWage",text:e({id:"IDS_LABEL_STAFF_WAGE_HOURY"}),sort:!1,formatter:function(e){return Object(m.o)(Number(e))}},{dataField:"totalWage",text:e({id:"IDS_LABEL_STAFF_TOTAL_WAGE_DAY"}),sort:!1,formatter:function(e){return Object(m.o)(Number(e))}},{dataField:"tool",text:e({id:"IDS_DISH_LABEL_TOOLS"}),formatter:t.generateColumnsTools,headerStyle:{width:"200px"},style:{textAlign:"center"}}]},t.onClickEdit=function(e){return function(){t.props.toggleModalTimeKeeping(!0,e)}},t.onClickCopy=function(e,a){return function(){var n=t.state.listWageDate,o=t.props.userId;if(n[a-1]){var r={id:e.id,hourWage:n[a-1].hourWage,normalHours:n[a-1].normalHours,otHours:n[a-1].otHours,date:Object(R.default)(new Date(e.date),f.d),userId:o};if(Object(m.l)(r.userId))return;0===(""+r.id).indexOf("new")?(delete r.id,t.props.addWageToSV(r,(function(){t.props.getNewWageByDateByUser()}))):t.props.updateWageToSV(r,(function(){t.props.getNewWageByDateByUser()}))}}},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidMount=function(){this.initListWageDate(this.props.listWage,this.props.fromDate,this.props.toDate)},r.componentDidUpdate=function(e){this.props.listWage===e.listWage&&this.props.fromDate===e.fromDate&&this.props.toDate===e.toDate||this.initListWageDate(this.props.listWage,this.props.fromDate,this.props.toDate)},r.render=function(){var e=this.state.listWageDate;return o.a.createElement("div",{className:"list-date-wage-wrapper pt-4 border-top"},o.a.createElement(v.a,{keyField:"id",data:e,havePagination:!1,columns:this.generateColumns()}))},n}(o.a.Component);De.defaultProps={listWage:[],getNewWageByDateByUser:function(){},toggleModalTimeKeeping:function(){},hourWage:0};var be=Object(r.b)((function(){return{}}),(function(e){return{addWageToSV:function(t,a){return e(T(t,a))},updateWageToSV:function(t,a){return e(C(t,a))}}}))(Object(u.injectIntl)(De));var he=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={data:null},t.initData=function(e){t.setState({data:e.data})},t.onSave=function(){var e=t.props.userId,a={id:t.state.data.id,hourWage:t.state.data.hourWage,normalHours:t.state.data.normalHours,otHours:t.state.data.otHours,userId:e,date:Object(R.default)(new Date(t.state.data.date),f.d)};Object(m.l)(a.userId)||(0===(""+a.id).indexOf("new")?(delete a.id,t.props.addWageToSV(a,(function(){t.onCloseModal(!0)}))):t.props.updateWageToSV(a,(function(){t.onCloseModal(!0)})))},t.onCloseModal=function(e){void 0===e&&(e=!1),t.props.onCloseModal(e)},t.onChange=function(e){var a;if(e&&e.target&&e.target.name){var n=e.target&&e.target.value||"",o=t.state.data,r=Object.assign({},o,((a={})[e.target.name]=n,a));t.setState({data:r})}},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidMount=function(){this.initData(this.props.modalTimeKeeping)},r.componentDidUpdate=function(e){this.props.modalTimeKeeping!==e.modalTimeKeeping&&this.initData(this.props.modalTimeKeeping)},r.render=function(){var e=this.props.modalTimeKeeping,t=this.state.data,a=e.isOpen;return o.a.createElement(re.a,{unmountOnClose:!0,centered:!0,className:"dish-modal-wrapper modal-lg modal-xl",isOpen:a,toggle:this.onCloseModal},o.a.createElement(le.a,{tag:"h4",toggle:this.onCloseModal},t&&t.date&&Object(R.default)(new Date(t.date),f.c)),o.a.createElement(ce.a,null,t&&o.a.createElement(Y.a,null,o.a.createElement(ie.a,{form:!0,className:"d-flex justify-content-between"},o.a.createElement(ue.a,{id:"normalHours",label:"IDS_LABEL_STAFF_NORMAL_HOURS",value:t.normalHours,name:"normalHours",type:"number",mode:f.k.EDIT,onChange:this.onChange,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}),o.a.createElement(ue.a,{id:"otHours",label:"IDS_LABEL_STAFF_OT_HOURS",value:t.otHours,name:"otHours",type:"number",mode:f.k.EDIT,onChange:this.onChange,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}),o.a.createElement(ue.a,{id:"hourWage",label:"IDS_LABEL_STAFF_WAGE_HOURY",value:t.hourWage,name:"hourWage",type:"number",mode:f.k.EDIT,onChange:this.onChange,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6"})))),o.a.createElement(se.a,null,o.a.createElement(Z.a,{color:"primary",onClick:this.onSave},o.a.createElement(d.a,{Tag:"<>",id:"IDS_SAVE_BTN"})),o.a.createElement(Z.a,{color:"secondary",onClick:this.onCloseModal},o.a.createElement(d.a,{Tag:"<>",id:"IDS_CANCEL_BTN"}))))},n}(o.a.PureComponent);he.defaultProps={onCloseModal:function(){},hourWage:0,userId:null};var _e=Object(r.b)((function(e){return{modalTimeKeeping:e.staff.modalTimeKeeping}}),(function(e){return{addWageToSV:function(t,a){return e(T(t,a))},updateWageToSV:function(t,a){return e(C(t,a))}}}))(Object(u.injectIntl)(he));var Oe=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={fromDate:Object(R.default)(new Date,f.d),toDate:Object(R.default)(new Date,f.d)},t.initWageByDateByUser=function(e,a){if(e.isOpen&&!Object(m.l)(a.userId)){var n={userId:a.userId,fromDate:a.fromDate?a.fromDate:Object(R.default)(new Date,f.d),toDate:a.toDate?a.toDate:Object(R.default)(new Date,f.d)};t.setState({fromDate:n.fromDate,toDate:n.toDate}),t.props.getListWageByDate(n)}},t.onCloseModal=function(e){void 0===e&&(e=!1),t.props.closeModalInfo(e)},t.onChangeFromDate=function(e){t.setState({fromDate:Object(R.default)(e,f.d)})},t.onChangeToDate=function(e){t.setState({toDate:Object(R.default)(e,f.d)})},t.onClickToday=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(new Date,f.d),toDate:Object(R.default)(new Date,f.d)},(function(){t.getNewWageByDateByUser()})))},t.onClickThisWeek=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(Object(H.default)(new Date),f.d),toDate:Object(R.default)(Object(K.default)(new Date),f.d)},(function(){var e=Object.assign({},t.props.params,{},t.state);t.initWageByDateByUser(t.props.modalWage,e)})))},t.onClickThisMonth=function(e){e&&(e.preventDefault(),e.stopPropagation(),t.setState({fromDate:Object(R.default)(Object(G.default)(new Date),f.d),toDate:Object(R.default)(Object(V.default)(new Date),f.d)},(function(){t.getNewWageByDateByUser()})))},t.closeModalTimeKeeping=function(e){void 0===e&&(e=!1),t.props.toggleModalTimeKeeping(!1,null),e&&t.getNewWageByDateByUser()},t.getNewWageByDateByUser=function(){var e=Object.assign({},t.props.params,{},t.state);t.initWageByDateByUser(t.props.modalWage,e)},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var r=n.prototype;return r.componentDidMount=function(){this.initWageByDateByUser(this.props.modalWage,this.props.params)},r.componentDidUpdate=function(e){this.props.modalWage.isOpen!==e.modalWage.isOpen&&this.initWageByDateByUser(this.props.modalWage,this.props.params)},r.render=function(){var e=this.props,t=e.modalWage,a=e.wageInfo,n=e.params,r=this.state,l=r.fromDate,c=r.toDate,i=t.isOpen,s=t.mode;return o.a.createElement(re.a,{unmountOnClose:!0,centered:!0,className:"dish-modal-wrapper modal-lg modal-xl",isOpen:i,toggle:this.onCloseModal},o.a.createElement(le.a,{tag:"h4",toggle:this.onCloseModal},o.a.createElement(d.a,{id:"IDS_LABEL_STAFF_TIMEKEEPING"})),o.a.createElement(ce.a,null,o.a.createElement(Y.a,{className:"d-flex align-items-center justify-content-start"},o.a.createElement(q.a,{className:"ml-2 mr-2 d-flex align-items-center"},o.a.createElement(J.a,{className:"mb-0 mr-2"},o.a.createElement(d.a,{Tag:"<>",id:"IDS_LABLE_FROM"})),o.a.createElement(Q.a,{mode:f.k.EDIT,date:new Date(l),onChange:this.onChangeFromDate})),o.a.createElement(q.a,{className:"ml-2 mr-2 d-flex align-items-center"},o.a.createElement(J.a,{className:"mb-0 mr-2"},o.a.createElement(d.a,{Tag:"<>",id:"IDS_LABEL_TO"})),o.a.createElement(Q.a,{mode:f.k.EDIT,date:new Date(c),onChange:this.onChangeToDate})),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickToday},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_TODAY"}))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickThisWeek},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_WEEK"}))),o.a.createElement(q.a,{className:"ml-2"},o.a.createElement(Z.a,{color:"primary",type:"button",onClick:this.onClickThisMonth},o.a.createElement(X.a,{id:"IDS_LABEL_STAFF_FILTER_THIS_MONTH"})))),a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Y.a,null,o.a.createElement(ie.a,{form:!0,className:"d-flex justify-content-between"},o.a.createElement(ue.a,{label:"IDS_DISH_LABEL_ID",id:"userId",value:a.userId,isReadOnly:!0,mode:s,classWrapper:s===f.k.NEW?"d-none":"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{label:"IDS_LABEL_STAFF_NAME",id:"name",value:a.employeeName||"",name:"name",mode:s,onChange:this.onChange,required:!0,classWrapper:"col-sm-12 col-lg-6",classLabel:"col-sm-12 col-lg-4",classInputContainer:"col-sm-12 col-lg-8"}),o.a.createElement(ue.a,{id:"totalNormalHours",label:"IDS_LABEL_STAFF_NORMAL_HOURS",value:a.totalNormalHours,name:"totalNormalHours",type:"number",mode:f.k.VIEW,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}),o.a.createElement(ue.a,{id:"totalOtHours",label:"IDS_LABEL_STAFF_OT_HOURS",value:a.totalOtHours,name:"totalOtHours",type:"number",mode:f.k.VIEW,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}),o.a.createElement(ue.a,{id:"totalWage",label:"IDS_LABEL_STAFF_TOTAL_WAGE",value:a.totalWage,name:"totalWage",type:"number",mode:f.k.VIEW,classLabel:"col-xs-12 col-lg-4",classInputContainer:"col-xs-12 col-lg-8",classWrapper:"col-lg-6",required:!0}))),o.a.createElement(be,{listWage:a.listWage,toggleModalTimeKeeping:this.props.toggleModalTimeKeeping,hourWage:a.hourWage,fromDate:l,toDate:c,getNewWageByDateByUser:this.getNewWageByDateByUser,userId:n.userId}))),o.a.createElement(_e,{onCloseModal:this.closeModalTimeKeeping,userId:n.userId,hourWage:a?a.hourWage:0}),o.a.createElement(se.a,null))},n}(o.a.PureComponent);Oe.defaultProps={closeModalWage:function(){}};var Ie=Object(r.b)((function(e){var t=Object(W.a)([w,F,k,M],(function(e,t,a,n){if(!Object(m.l)(e)){var o=t[e]||{},r=a||[],l=n[e]&&n[e].hourWage;return Object.assign({userId:e},o,{listWage:r,hourWage:l})}})),a=Object(W.a)([P,x,U],(function(e,t,a){return{fromDate:e,toDate:t,userId:a}}));return{wageInfo:t(e),modalWage:e.staff.modalWage,params:a(e)}}),(function(e){return{toggleModalWage:function(t,a,n){return e(O(t,a,n))},updateModeModalWage:function(t){return e(function(e){return{type:p.h.UPDATE_MODE_MODAL_WAGE,payload:{mode:e}}}(t))},getListWageByDate:function(t){return e(L(t))},toggleModalTimeKeeping:function(t,a){return e(function(e,t){return function(a){a({type:p.h.TOGGLE_MODE_MODAL_WAGE,payload:{isOpen:e,data:t}})}}(t,a))}}}))(Oe);function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ye=function(e){var t,a;function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={queryString:""},t.getNewUrl=function(e){var a=s.a.stringify(e);return""===a?t.props.path:t.props.path+"?"+a},t.getListStaff=function(){var e=t.props,a=e.pageSize,n=e.pageIndex,o=e.orderBy,r={pageSize:a,sortBy:e.sortBy,orderBy:o,pageNum:n};t.props.getStaff(!0,r)},t.getListWage=function(){var e=t.props.toolbar;t.props.getListWage({fromDate:e.fromDate,toDate:e.toDate})},t.genGenderTitle=function(e){var a=t.props.intl,n=f.j.filter((function(t){return""+t.value==""+e}));return n.length?a.formatMessage({id:n[0].title}):""},t.generateColumnsTools=function(e,a,n){var r=t.props.intl.formatMessage;return o.a.createElement("div",{className:"tool"},o.a.createElement("button",{type:"button",className:"btn btn-info my-2 mx-2 rounded btn-sm btn-md",onClick:t.handleClickTimeKeeping(a,n)},r({id:"IDS_LABEL_STAFF_TIMEKEEPING"})),o.a.createElement("button",{type:"button",className:"btn btn-primary my-2 mx-2 rounded btn-sm btn-md",onClick:t.handleClickInfo(a,n)},r({id:"IDS_LABEL_STAFF_INFO"})),o.a.createElement("button",{type:"button",className:"btn btn-danger my-2 mx-2 rounded btn-sm btn-md",onClick:t.handleClickDelete(a,n)},o.a.createElement(c.x,null)))},t.generateColumns=function(){var e=t.props,a=e.intl,n=e.isEnableTimeKeeping,o=a.formatMessage,r=[{dataField:"id",text:"ID",sort:!0,headerStyle:{width:"80px",textAlign:"center"},style:{padding:"0.75em 0.5em"}},{dataField:"name",text:o({id:"IDS_LABEL_STAFF_NAME"}),sort:!0},{dataField:"birthday",text:o({id:"IDS_LABEL_STAFF_BIRTHDAY"}),sort:!0,headerStyle:{width:"120px"},formatter:function(e){return e?Object(m.i)(new Date(e)):""}},{dataField:"gender",text:o({id:"IDS_LABEL_STAFF_GENDER"}),sort:!0,formatter:function(e){return t.genGenderTitle(e)},headerStyle:{width:"100px"}},{dataField:"hourWage",text:o({id:"IDS_LABEL_STAFF_WAGE_HOURY"}),sort:!0,formatter:function(e){return Object(m.o)(Number(e))}}];return n&&(r=[].concat(Se(r),[{dataField:"totalNormalHours",text:o({id:"IDS_LABEL_STAFF_NORMAL_HOURS"}),sort:!1,formatter:function(e){return Object(m.o)(e)}},{dataField:"totalOtHours",text:o({id:"IDS_LABEL_STAFF_OT_HOURS"}),sort:!1,formatter:function(e){return Object(m.o)(e)}},{dataField:"totalWage",text:o({id:"IDS_LABEL_STAFF_TOTAL_WAGE"}),sort:!1,formatter:function(e){return Object(m.o)(e)}}])),r=[].concat(Se(r),[{dataField:"tool",text:o({id:"IDS_DISH_LABEL_TOOLS"}),formatter:t.generateColumnsTools,headerStyle:{width:"20%"},style:{textAlign:"center"}}])},t.handleClickDelete=function(e){return function(a){a&&(a.preventDefault(),a.stopPropagation(),t.props.toggleModalDeleteProps(!0,e.id))}},t.handleClickTimeKeeping=function(e){return function(a){if(a){var n;a.preventDefault(),a.stopPropagation();var o=t.getNewUrl(((n={})[te.MODAL_TYPE]=ae.TIME_KEEPING,n[te.ID]=e.id,n));Object(l.navigate)(o)}}},t.handleClickInfo=function(e){return function(a){if(a&&!Object(m.l)(e&&e.id)){var n;a.preventDefault(),a.stopPropagation();var o=t.getNewUrl(((n={})[te.MODAL_TYPE]=ae.INFO,n[te.ID]=e.id,n));Object(l.navigate)(o)}}},t.handleClickAddEmployee=function(){var e,a=t.getNewUrl(((e={})[te.MODAL_TYPE]=ae.INFO,e));Object(l.navigate)(a)},t.closeModalInfo=function(e){void 0===e&&(e=!1);var a=t.getNewUrl();Object(l.navigate)(a),e&&(t.props.getNewDataFirstPage(),t.getListWage())},t.closeModalWage=function(e){void 0===e&&(e=!1);var a=t.getNewUrl();Object(l.navigate)(a),e&&t.getListWage()},t}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.getDerivedStateFromProps=function(e,t){if(e.location.search!==t.queryString){var a=s.a.parse(e.location.search),n=e.isOpenModalInfo,o=e.toggleModalInfo,r=e.isOpenModalTimeKeeping,l=e.toggleModalWage;if(a[te.MODAL_TYPE]===""+ae.INFO)o(!n,a&&a.id||"",a&&a.id?f.k.VIEW:f.k.NEW);else if(a[te.MODAL_TYPE]===""+ae.TIME_KEEPING){l(!r,a&&a.id||"",f.k.VIEW)}else o(!1,null,f.k.VIEW),l(!1,null,f.k.VIEW);return{queryString:e.location.search}}return null};var r=n.prototype;return r.componentDidMount=function(){this.getListStaff(),this.getListWage()},r.componentWillUnmount=function(){this.props.unmountStaffPage()},r.render=function(){var e=this.props,t=e.pageSize,a=e.onSort,n=e.onPageChange,r=e.onSizePerPageChange,l=e.totalSize,c=e.listStaff;return o.a.createElement("div",{className:"page-wrapper staff-wrapper container-fluid"},o.a.createElement("div",{className:"d-sm-flex align-items-center header-wrapper"},o.a.createElement(d.a,{id:"IDS_LABEL_STAFF_INFO",Tag:"h3",className:"mb-0 text-dark"})),o.a.createElement("div",{className:"staff-body-wrapper"},o.a.createElement(ee,{addEmployee:this.handleClickAddEmployee}),o.a.createElement("div",{className:"table-wrapper"},o.a.createElement(v.a,{totalSize:l,keyField:"id",data:c,columns:this.generateColumns(),onPageChange:n,onSizePerPageChange:r,pageSize:t,onSort:a}))),o.a.createElement(fe,{closeModalInfo:this.closeModalInfo}),o.a.createElement(pe,{closeModalInfo:this.closeModalInfo}),o.a.createElement(Ie,{closeModalInfo:this.closeModalWage}))},n}(o.a.PureComponent),Te={pageSize:f.h,pageIndex:1,orderBy:"desc",sortBy:"username",functionGetData:"getListStaff"};t.default=Object(r.b)((function(){var e=Object(W.a)([N,M,F],(function(e,t,a){return e.map((function(e){return Object.assign({},t[e],{},a[e])}))}));return function(t){return{listStaff:e(t),totalSize:t.staff.totalSize,isEnableTimeKeeping:t.staff.toolbar.isEnableTimeKeeping,isOpenModalInfo:t.staff.modalInfo.isOpen,isOpenModalTimeKeeping:t.staff.modalWage.isOpen,toolbar:t.staff.toolbar}}}),(function(e){return{getStaff:function(t,a){return e(S(t,a))},requestData:function(){return e(Object(E.b)())},receiveData:function(){return e(Object(E.a)())},toggleAlert:function(t){return e(Object(E.c)(t))},toggleModalInfo:function(t,a,n){return e(_(t,a,n))},toggleModalWage:function(t,a,n){return e(O(t,a,n))},toggleModalDeleteProps:function(t,a){return e(I(t,a))},getListWage:function(t){return e(A(t))},unmountStaffPage:function(){return e({type:p.h.UNMOUNT_STAFF_PAGE})}}}))(Object(u.injectIntl)(Object(j.a)(ye,Te)))}}]);